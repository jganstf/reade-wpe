<?php

$fields = get_fields();

//70%;
?>

<?php
add_action( 'wp_footer', function() {
?>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js" integrity="sha512-EZI2cBcGPnmR89wTgVnN3602Yyi7muWo8y1B3a8WmIv1J9tYG+udH4LvmYjLiGp37yHB7FfaPBo8ly178m9g4Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js" integrity="sha512-OzC82YiH3UmMMs6Ydd9f2i7mS+UFL5f977iIoJ6oy07AJT+ePds9QOEtqXztSH29Nzua59fYS36knmMcv79GOg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js" integrity="sha512-G7Wpe/pbg+zjyyM9HgQY6kacLAy+580lmA8DUXmZtioTI5FkaCRoLOaCLoeblrZABs7KZFD03cfSV9j7nmwxfw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<?php }); ?>

<div class="history-new">
	<div class="history-new--content">
		<div class="history-new--left">
			<?php

			if (!empty($fields['slides'])) {
				?>
				<div class="history-new--slides">
					<?php

					$count = 1;
					foreach ($fields['slides'] AS $slide) {

						$year = $slide['years'];
						$yearPart1 = substr($year, 0, 2);
						$yearPart2 = substr($year, 2, 4);

						if (stripos($year, '-') !== false) {
							$year = str_replace(' ', '', $year);
							$year = explode('-', $year);
							$yearPart1 = "'" . substr($year[0], 2, 4);
							$yearPart2 = " - '" . substr($year[1], 2, 4);
							$year = $yearPart1 . $yearPart2;
						} elseif (stripos($year, '&') !== false) {
							$year = str_replace(' ', '', $year);
							$year = explode('&', $year);
							$yearPart1 = "'" . substr($year[0], 2, 4);
							$yearPart2 = " & '" . substr($year[1], 2, 4);
							$year = $yearPart1 . $yearPart2;
						}

						?>
						<div id="history-new--slide-<?php echo $count; ?>" data-year="<?php echo $year; ?>" class="history-new--slide history-new--slide-layout-<?php echo $slide['layout']; ?> history-new--slide-<?php echo $count; ?> <?php if ($count === 1) { echo 'history-new--slide-current'; } ?>" <?php if ($count !== 1) { echo 'style="display: none;"'; } ?>">
							<div class="history-new--slide-bg-year-1"><?php echo str_replace(array(' ', '-', '&'), '', $yearPart1); ?></div>
							<div class="history-new--slide-bg-year-2"><?php echo str_replace(array(' ', '-', '&'), '', $yearPart2); ?></div>

							<div class="history-new--slide-left">
								<?php
										
								if (!empty($slide['image_1']) || !empty($slide['image_2'])) {
									?>
									<div class="history-new--slide-images">
										<?php
		
										if (!empty($slide['image_1'])) {
											echo wp_get_attachment_image($slide['image_1']['ID'], 'large', false, ['class' => 'slide-image slide-image-1', 'loading' => $count === 1 ? 'eager' : 'lazy']);
										}

										if (!empty($slide['image_2'])) {
											echo wp_get_attachment_image($slide['image_2']['ID'], 'large', false, ['class' => 'slide-image slide-image-2', 'loading' => $count === 1 ? 'eager' : 'lazy']);
										}

										?>
									</div>
									<?php
								}

								?>
							</div>
							<div class="history-new--slide-right">
								
								<?php

								if (!empty($slide['title']) || !empty($slide['text'])) {
									?>
									<div class="history-new--slide-info">
										<svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
											<circle cx="13.1133" cy="13.1152" r="5.52344" fill="#EFFBFF"/>
											<circle cx="13.1152" cy="13.1152" r="12.1152" stroke="#EFFBFF" stroke-width="2"/>
										</svg>
										<div class="history-new--slide-title"><?php echo $slide['title']; ?></div>
										<div class="history-new--slide-text"><?php echo $slide['text']; ?></div>
									</div>
									<?php
								}

								?>
							</div>
						</div>
						<?php
						$count++;
					}

					?>
				</div>
				<?php
			}

			?>
		</div>
		<div class="history-new--right">
			<div class="history-new--arrows">
				<div class="history-new--arrow-left">
					<a href="#prev" id="history-new--prev">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M12.9502 22.6294L4.97327 14.6525M4.97327 14.6525L12.9502 6.67555M4.97327 14.6525L25.4854 14.6525" stroke="#EFFBFF" stroke-width="2.4468" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</a>
				</div>
				<div class="history-new--arrow-right">
					<a href="#next" id="history-new--next">
						<svg width="31" height="30" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M17.8114 6.67627L25.7883 14.6532M25.7883 14.6532L17.8114 22.6301M25.7883 14.6532L5.27625 14.6532" stroke="#EFFBFF" stroke-width="2.4468" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</a>
				</div>
			</div>
			<div class="history-new--dial">
				<div id="history-dial" class="history-new--dial-center">
					<div class="history-grab-container"></div>
					<svg width="450" height="451" viewBox="0 0 450 451" fill="none" xmlns="http://www.w3.org/2000/svg">
						<circle cx="224.84" cy="225.629" r="224.84" fill="#CFEEF7"/>
						<g clip-path="url(#clip0_6519_5409)">
						<path d="M309.406 203.47V172.755C309.809 172.716 310.12 172.66 310.43 172.66C312.741 172.655 315.054 172.573 317.36 172.697C318.77 172.774 320.182 173.094 321.561 173.443C323.252 173.871 324.341 175.049 324.69 176.765C324.997 178.271 325.279 179.82 325.281 181.35C325.323 205.952 325.315 230.556 325.318 255.158C325.318 255.478 325.281 255.797 325.266 256.035C325.154 256.13 325.128 256.17 325.104 256.17C321.824 256.321 318.541 256.387 315.307 255.713C312.303 255.087 311.084 253.451 310.839 250.401C310.581 247.19 310.641 243.952 310.612 240.726C310.578 236.875 310.69 233.022 310.565 229.177C310.43 225.001 310.028 220.849 308.84 216.808C307.577 212.511 304.684 210.069 300.463 209.176C296.81 208.401 293.103 208.436 289.403 208.734C287.696 208.872 285.974 209.02 284.301 209.366C282.514 209.739 281.255 210.944 280.823 212.744C280.419 214.427 280.169 216.163 280.036 217.892C279.874 219.956 279.833 222.038 279.874 224.11C279.952 228.085 279.913 232.073 281.156 235.929C282.667 240.604 285.844 243.358 290.539 244.283C295.721 245.306 300.872 245.004 305.956 243.567C306.229 243.49 306.513 243.44 307.022 243.326C306.889 244.349 306.844 245.255 306.649 246.127C305.377 251.823 301.683 255.063 296.25 256.418C293.587 257.084 290.87 257.121 288.123 256.886C285.223 256.638 282.389 256.16 279.661 255.147C273.032 252.687 268.689 247.922 266.232 241.299C265.059 238.141 264.35 234.869 264.1 231.505C263.957 229.57 263.715 227.628 263.762 225.696C263.884 220.521 264.335 215.384 266.159 210.473C269.038 202.725 274.405 197.833 282.386 195.967C287.318 194.812 292.287 194.548 297.248 195.777C302.084 196.974 306.336 199.149 309.2 203.51L309.411 203.478L309.406 203.47Z" fill="#BAE3E9"/>
						<path d="M55.8395 176.014C56.4128 176.014 56.7358 176.014 57.0563 176.014C70.5635 176.019 84.0707 175.929 97.5753 176.069C103.576 176.13 109.472 177.121 114.996 179.732C121.911 183.001 125.994 188.475 126.997 196.107C127.849 202.584 127.318 208.946 124.131 214.818C120.582 221.359 115.105 225.215 107.885 226.568C107.346 226.668 106.807 226.756 105.994 226.896C120.074 244.156 134.11 261.255 148.24 278.552C147.696 278.575 147.354 278.605 147.016 278.605C143.892 278.607 140.765 278.546 137.643 278.62C131.46 278.763 126.315 276.477 122.281 271.794C119.673 268.768 117.276 265.554 114.819 262.396C107.185 252.584 99.5685 242.758 91.9473 232.934C90.621 231.224 89.274 229.528 87.9894 227.784C86.9316 226.351 86.2932 224.758 86.5303 222.908C86.7622 221.095 88.0233 219.842 89.8446 219.768C91.6633 219.694 93.495 219.826 95.3084 219.702C97.6326 219.543 99.9828 219.401 102.257 218.928C107.007 217.942 109.816 214.926 110.54 210.027C111.101 206.229 111.166 202.423 110.59 198.618C110.111 195.446 108.321 193.292 105.475 192.005C102.945 190.861 100.256 190.369 97.5127 190.354C89.0499 190.306 80.5897 190.372 72.1268 190.309C69.1383 190.288 66.1627 189.976 63.3878 188.649C59.271 186.68 56.9521 183.345 56.1209 178.881C55.9568 177.993 55.9412 177.079 55.8395 176.014Z" fill="#BAE3E9"/>
						<path d="M202.589 196.004C203.082 196.004 203.431 196.004 203.78 196.004C211.917 196.009 220.054 195.93 228.191 196.049C233.006 196.118 237.772 196.773 242.347 198.443C249.304 200.983 253.624 205.862 255.193 213.219C255.826 216.198 256.013 219.208 256.011 222.242C256.003 233.159 256.008 244.076 256.008 254.994C256.008 255.351 256.008 255.707 256.008 256.059C255.795 256.138 255.677 256.22 255.557 256.223C252.764 256.257 249.966 256.342 247.194 255.85C244.711 255.409 243.58 254.14 243.405 251.582C243.296 249.98 243.218 248.379 243.116 246.645C242.892 246.849 242.704 246.962 242.592 247.129C239.218 252.211 234.382 255.055 228.574 256.173C221.297 257.576 214.14 257.029 207.266 254.066C203.582 252.478 200.559 250.033 198.548 246.455C197.29 244.217 196.625 241.79 196.521 239.211C196.396 236.095 196.565 233.024 197.722 230.08C199.28 226.113 202.219 223.626 206.036 222.088C209.296 220.775 212.707 220.061 216.195 219.969C222.438 219.802 228.684 219.797 234.927 219.731C235.117 219.731 235.307 219.779 235.589 219.818C235.589 220.378 235.656 220.931 235.578 221.462C234.953 225.619 232.436 228.006 228.514 228.912C226.943 229.274 225.31 229.401 223.694 229.496C221.425 229.628 219.14 229.538 216.875 229.713C213.994 229.937 213.144 230.971 212.928 233.619C212.793 235.255 212.738 236.92 212.876 238.553C213.037 240.456 214.155 241.814 215.818 242.707C217.847 243.799 220.054 244.206 222.303 244.272C225.359 244.362 228.423 244.33 231.48 244.267C232.707 244.24 233.947 244.09 235.148 243.828C237.907 243.228 239.645 242.023 239.841 238.051C240.107 232.657 240.049 227.247 240.083 221.843C240.094 220.003 240.114 218.137 239.854 216.324C239.411 213.243 237.665 211.108 234.731 210.035C232.756 209.313 230.706 208.977 228.621 208.948C225.205 208.898 221.787 208.954 218.368 208.919C215.182 208.888 211.998 208.808 208.811 208.724C208.199 208.708 207.581 208.6 206.982 208.467C204.483 207.923 203.41 206.781 202.967 204.154C202.792 203.118 202.647 202.069 202.607 201.023C202.548 199.413 202.592 197.798 202.592 195.996L202.589 196.004Z" fill="#BAE3E9"/>
						<path d="M187.573 256.434C187.073 256.434 186.721 256.434 186.366 256.434C178.685 256.434 171.004 256.508 163.323 256.408C158.114 256.342 152.955 255.787 148.039 253.826C140.139 250.673 135.363 244.806 133.231 236.568C132.03 231.922 131.871 227.189 132.119 222.448C132.32 218.563 133.062 214.752 134.537 211.118C137.419 204.012 142.591 199.44 149.704 197.029C152.797 195.983 155.981 195.354 159.243 195.206C161.45 195.105 163.667 194.941 165.866 195.05C172.32 195.37 178.396 196.95 183.545 201.163C188.235 205 190.851 210.061 191.908 216.018C192.424 218.927 192.315 221.861 192.271 224.789C192.26 225.571 192.112 226.359 191.94 227.125C191.398 229.528 190.23 230.548 187.815 230.699C186.064 230.807 184.311 230.886 182.557 230.891C173.021 230.91 163.485 230.899 153.948 230.899H152.591C152.632 230.323 152.648 229.824 152.703 229.327C153.229 224.583 156.525 221.924 160.738 221.161C162.104 220.912 163.508 220.793 164.899 220.772C168.284 220.717 171.669 220.754 175.053 220.754C175.439 220.754 175.827 220.754 176.254 220.754C176.611 219.564 176.359 218.47 176.116 217.397C174.85 211.795 170.848 208.438 165.702 207.838C162.049 207.413 158.312 207.696 154.613 207.756C153.594 207.772 152.562 208.052 151.572 208.343C150.238 208.737 149.256 209.662 148.94 211.028C148.568 212.651 148.229 214.318 148.195 215.973C148.096 220.952 148.151 225.934 148.148 230.913C148.148 236.682 151.202 240.91 156.632 242.692C158.789 243.4 161.017 243.635 163.258 243.656C168.823 243.709 174.389 243.669 179.954 243.717C181.08 243.728 182.216 243.907 183.328 244.113C185.327 244.486 186.559 245.744 186.997 247.742C187.612 250.554 187.656 253.405 187.57 256.429L187.573 256.434Z" fill="#BAE3E9"/>
						<path d="M389.017 256.434C388.632 256.434 388.277 256.434 387.926 256.434C380.245 256.434 372.561 256.503 364.882 256.411C359.838 256.35 354.833 255.824 350.049 254.006C341.651 250.813 336.685 244.632 334.621 235.895C333.566 231.428 333.423 226.885 333.681 222.342C333.931 217.953 334.825 213.677 336.729 209.67C339.994 202.804 345.471 198.697 352.568 196.617C355.351 195.803 358.202 195.381 361.094 195.164C366.089 194.791 371.031 194.981 375.865 196.411C383.838 198.774 389.536 203.687 392.371 211.737C393.304 214.388 393.846 217.136 393.835 219.951C393.827 222.348 393.786 224.766 393.46 227.131C393.132 229.504 391.751 230.559 389.361 230.699C387.545 230.805 385.727 230.887 383.908 230.889C374.437 230.908 364.966 230.897 355.492 230.897H354.312C353.942 229.903 354.259 229.008 354.465 228.141C355.349 224.42 357.821 222.274 361.367 221.38C362.866 221.002 364.442 220.82 365.987 220.78C369.533 220.693 373.082 220.751 376.631 220.751C377.016 220.751 377.402 220.751 377.824 220.751C378.178 219.586 377.92 218.518 377.696 217.48C376.558 212.218 372.475 208.375 367.154 207.778C363.014 207.313 358.843 207.31 354.708 207.907C351.086 208.433 350.077 210.407 349.963 213.523C349.736 219.713 349.614 225.918 349.778 232.108C349.908 237.047 352.941 240.964 358.199 242.692C360.356 243.4 362.584 243.635 364.825 243.657C370.552 243.712 376.282 243.672 382.011 243.731C383.072 243.741 384.142 243.955 385.182 244.188C387.402 244.679 388.46 246.328 388.702 248.424C388.991 250.935 389.017 253.475 389.153 256.004C389.158 256.094 389.098 256.186 389.02 256.432L389.017 256.434Z" fill="#BAE3E9"/>
						<path d="M66.2129 257.449V256.086C66.2129 242.729 66.2129 229.37 66.2129 216.013C66.2129 211.573 66.8486 207.27 69.0295 203.346C71.3458 199.17 74.8998 196.744 79.5663 196.012C80.4835 195.867 81.4189 195.832 82.4455 195.737C82.4793 196.213 82.521 196.53 82.521 196.847C82.521 212.614 82.5523 228.379 82.4819 244.145C82.4715 246.463 82.0807 248.794 81.7211 251.093C81.2834 253.892 79.5637 255.718 76.9634 256.596C75.6554 257.037 74.2562 257.33 72.8805 257.418C70.7231 257.552 68.5553 257.452 66.2103 257.452L66.2129 257.449Z" fill="#BAE3E9"/>
						</g>
						<defs>
						<clipPath id="clip0_6519_5409">
						<rect width="338" height="106" fill="white" transform="translate(55.8395 172.628)"/>
						</clipPath>
						</defs>
					</svg>
				</div>
			</div>
		</div>
	</div>
</div>
